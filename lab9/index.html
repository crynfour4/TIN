<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Biblioteka Filmowa</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-200 py-5">

<div id="films-library" class="container mx-auto">

</div>

<script>
    // --- Data ---
    const films = [
        {
            tytul: "Drive",
            rezyser: "Nicolas Winding Refn",
            rok: 2011,
            gatunek: "Drama",
            ocena: 7.8
        },
        {
            tytul: "What We Do in the Shadows",
            rezyser: "Taika Waititi",
            rok: 2014,
            gatunek: "Comedy",
            ocena: 7.6
        },
        {
            tytul: "Fight Club",
            rezyser: "David Fincher",
            rok: 1999,
            gatunek: "Thriller",
            ocena: 8.8
        },
        {
            tytul: "John Wick",
            rezyser: "Chad Stahelski",
            rok: 2014,
            gatunek: "Action",
            ocena: 7.5
        },
        {
            tytul: "Only Lovers Left Alive",
            rezyser: "Jim Jarmusch",
            rok: 2013,
            gatunek: "Dark Fantasy",
            ocena: 7.2
        }
    ];

    // --- Logika JavaScript do Generowania Strony ---
    document.addEventListener("DOMContentLoaded", () => {
        const appContainer = document.getElementById("films-library");
        if (!appContainer) {
            console.error("Container not found");
            return;
        }

        // Funkcja pomocnicza do tworzenia elementów
        function createElement(tag, classNames = [], textContent = '') {
            const element = document.createElement(tag);
            if (classNames.length > 0) {
                element.className = classNames.join(' ');
            }
            if (textContent) {
                element.textContent = textContent;
            }
            return element;
        }

        // --- 1. Page Header ---
        function createHeader() {
            const header = createElement('header', ['mb-5', 'bg-red-500', 'text-center', 'rounded-md', 'shadow-md']);
            const headerTitle = createElement('h1', ['text-white', 'font-bold', 'text-2xl', 'py-5'], 'Biblioteka Filmowa');
            header.appendChild(headerTitle);
            return header;
        }

        // --- 2. Filtrowanie i sortowanie ---
        function createFilterSection() {
            const filterContainer = createElement('div', ['flex', 'flex-col', 'mb-5', 'px-3', 'py-3', 'bg-white', 'rounded-md', 'shadow-md']);

            // --- Genres ---
            const title1 = createElement('h2', ['text-md', 'font-bold', 'mb-3'], 'Filtruj według gatunku:');
            filterContainer.appendChild(title1);

            const genresRow = createElement('div', ['flex', 'flex-row', 'gap-2', 'flex-wrap', 'mb-5']);

            const genresSet = new Set(films.map(film => film.gatunek));
            const genres = ['Wszystkie', ...genresSet];

            genres.forEach(gatunek => {
                const button = createElement('button', ['text-sm', 'py-2', 'px-3', 'rounded-md', 'text-black', 'bg-gray-300', 'hover:text-white', 'hover:bg-red-500', 'transition', 'duration-200'], gatunek);

                genresRow.appendChild(button);
            });

            filterContainer.appendChild(genresRow);

            // --- Sorting ---
            const title2 = createElement('h2', ['text-md', 'font-bold', 'mb-3'], 'Sortuj według:');
            filterContainer.appendChild(title2);

            const sortingRow = createElement('div', ['flex', 'flex-row', 'gap-2', 'flex-wrap']);

            const rating = createElement('button', ['text-sm', 'py-2', 'px-3', 'rounded-md', 'text-black', 'bg-gray-300', 'hover:text-white', 'hover:bg-red-500', 'transition', 'duration-200'], 'Oceny (najlepsze)');
            const year = createElement('button', ['text-sm', 'py-2', 'px-3', 'rounded-md', 'text-black', 'bg-gray-300', 'hover:text-white', 'hover:bg-red-500', 'transition', 'duration-200'], 'Roku (najnowsze)');

            sortingRow.appendChild(rating);
            sortingRow.appendChild(year);

            filterContainer.appendChild(sortingRow);

            return filterContainer;
        }

        // --- Films ---
        function createFilms() {
            const filmsContainer = createElement('div', ['grid', 'grid-cols-1', 'md:grid-cols-2', 'lg:grid-cols-3', 'gap-4']);

            const sortedFilms = films.sort((a, b) => b.ocena - a.ocena);

            sortedFilms.forEach((film) => {
                const filmContainer = createElement('div', ['shadow-md', 'rounded-md', 'bg-white', 'hover:-translate-y-1', 'transition-transform', 'duration-300']);

                const titleContainer = createElement('div', []);
                const imageTitle = createElement('p', ['font-sm', 'pl-1'], film.tytul);
                titleContainer.appendChild(imageTitle);
                filmContainer.appendChild(titleContainer);

                const imageContainer = createElement('div', ['w-full', 'h-32', 'flex', 'items-center', 'justify-center', 'bg-gray-50', 'rounded-md']);
                const image = createElement('img', ['w-6', 'h-6'], {
                    alt: film.tytul
                });

                imageContainer.appendChild(image);
                filmContainer.appendChild(imageContainer);

                const detailsContainer = createElement('div', ['pl-3', 'border-t']);

                const title = createElement('h2', ['font-bold', 'mb-1', 'mt-1'], film.tytul);
                const director = createElement('p', ['text-gray-700', 'mb-1'], `Reżyser: ${film.rezyser}`);
                const year = createElement('p', ['text-gray-700', 'mb-1'], `Rok: ${film.rok}`);
                const genre = createElement('p', ['text-gray-700', 'mb-1'], `Gatunek: ${film.gatunek}`);
                const rating = createElement('p', ['text-gray-700'], `Ocena: ${film.ocena}`);

                detailsContainer.appendChild(title);
                detailsContainer.appendChild(director);
                detailsContainer.appendChild(year);
                detailsContainer.appendChild(genre);
                detailsContainer.appendChild(rating);

                const ratingContainer = createElement('div', ['mr-3', 'my-3']);
                const ratingBarContainer = createElement('div', ['w-full', 'bg-gray-200', 'rounded-full', 'h-2', 'mt-1']);
                const ratingBar = createElement('div', ['bg-red-500', 'h-2', 'rounded-full']);

                const ratingPercentage = (parseFloat(film.ocena) * 10);
                ratingBar.style.width = `${ratingPercentage}%`;

                ratingBarContainer.appendChild(ratingBar);
                ratingContainer.appendChild(ratingBarContainer);

                detailsContainer.appendChild(ratingContainer);
                filmContainer.appendChild(detailsContainer);

                filmsContainer.appendChild(filmContainer);
            });

            return filmsContainer;
        }

        // --- Footer ---
        function createFooter() {
            const footer = createElement('footer', ['text-gray-700', 'text-center', 'mt-10']);

            footer.innerHTML = `&copy; ${new Date().getFullYear()} Biblioteka Filmowa | Stworzone z użyciem JavaScript i Tailwind CSS`;

            return footer;
        }

        const header = createHeader();
        appContainer.appendChild(header);

        const filterSection = createFilterSection();
        appContainer.appendChild(filterSection);

        const filmsSection = createFilms();
        appContainer.appendChild(filmsSection);

        const footer = createFooter();
        appContainer.appendChild(footer);
    });// Koniec 'DOMContentLoaded'
</script>

</body>
</html>
